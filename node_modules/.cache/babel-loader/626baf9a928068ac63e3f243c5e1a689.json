{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useContext, useEffect, useState } from 'react';\nimport { useSwal } from './useSwal';\nexport const useLead = () => {\n  _s();\n\n  const [fetching, setFetching] = useState(false);\n  const {\n    modalAlert\n  } = useSwal();\n\n  const createLeadSales = async dataLead => {\n    setFetching(true);\n\n    try {\n      const responseCreateLeadSales = await axios.post('/api/db/stepCreateLead', ...dataLead);\n      createLeadCRM(responseCreateLeadSales);\n    } catch (e) {\n      const {\n        message\n      } = e.response.data;\n      modalAlert(message, \"error\");\n      setFetching(false);\n    }\n  };\n\n  const createLeadCRM = async dataLead => {\n    try {\n      const resCreateLeadCRM = await axios.post('/api/createLeadZohoCRM', ...dataLead);\n      updateEntityIdCRMLeadSales(resCreateLeadCRM);\n    } catch (e) {\n      const {\n        message\n      } = e.response.data;\n      modalAlert(message, \"error\");\n      setFetching(false);\n    }\n  };\n\n  const updateEntityIdCRMLeadSales = async (dataLead, resCreateLeadCRM) => {\n    setFetching(true);\n\n    try {\n      const resEntityIdLeadCRM = await axios.post('/api/createLeadZohoCRM', {\n        crm: resCreateLeadCRM.data,\n        lead: { ...dataLead\n        }\n      });\n    } catch (e) {\n      const {\n        message\n      } = e.response.data;\n      modalAlert(message, \"error\");\n      setFetching(false);\n    } finally {\n      setFetching(false);\n    }\n  };\n\n  return {\n    setFetching,\n    createLeadSales\n  };\n};\n\n_s(useLead, \"kBILLrjGXemovxTRZELMmkx6yww=\", false, function () {\n  return [useSwal];\n});","map":{"version":3,"names":["axios","useContext","useEffect","useState","useSwal","useLead","fetching","setFetching","modalAlert","createLeadSales","dataLead","responseCreateLeadSales","post","createLeadCRM","e","message","response","data","resCreateLeadCRM","updateEntityIdCRMLeadSales","resEntityIdLeadCRM","crm","lead"],"sources":["C:/xampp/htdocs/om_react/src/components/VentaPresencial/Hook/useLead.js"],"sourcesContent":["import axios from 'axios';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { useSwal } from './useSwal';\r\n\r\nexport const useLead = () => {\r\n\r\n    const [fetching, setFetching] = useState(false);\r\n    const { modalAlert } = useSwal();\r\n\r\n    const createLeadSales = async (dataLead) => {\r\n        setFetching(true)\r\n        try {\r\n            const responseCreateLeadSales = await axios.post(\r\n                '/api/db/stepCreateLead',\r\n                ...dataLead\r\n            );\r\n            createLeadCRM(responseCreateLeadSales);\r\n        } catch (e) {\r\n            const { message } = e.response.data;\r\n            modalAlert(message, \"error\");\r\n            setFetching(false);\r\n        } \r\n    };\r\n    const createLeadCRM = async (dataLead) => {\r\n        \r\n        try {\r\n            const resCreateLeadCRM = await axios.post(\r\n                '/api/createLeadZohoCRM',\r\n                ...dataLead\r\n            );\r\n            updateEntityIdCRMLeadSales(resCreateLeadCRM);\r\n        } catch (e) {\r\n            const { message } = e.response.data;\r\n            modalAlert(message, \"error\");\r\n            setFetching(false);\r\n        } \r\n    };\r\n\r\n     const updateEntityIdCRMLeadSales = async (dataLead,resCreateLeadCRM) => {\r\n        setFetching(true)\r\n        \r\n        try {\r\n            const resEntityIdLeadCRM = await axios.post(\r\n                '/api/createLeadZohoCRM',\r\n                {\r\n                    crm: resCreateLeadCRM.data,\r\n                    lead: {...dataLead}\r\n                }\r\n            );\r\n        } catch (e) {\r\n            const { message } = e.response.data;\r\n            modalAlert(message, \"error\");\r\n            setFetching(false);\r\n        } finally {\r\n            setFetching(false);\r\n        }\r\n    };\r\n\r\n    return { setFetching,createLeadSales };\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAEzB,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BJ,QAAQ,CAAC,KAAD,CAAxC;EACA,MAAM;IAAEK;EAAF,IAAiBJ,OAAO,EAA9B;;EAEA,MAAMK,eAAe,GAAG,MAAOC,QAAP,IAAoB;IACxCH,WAAW,CAAC,IAAD,CAAX;;IACA,IAAI;MACA,MAAMI,uBAAuB,GAAG,MAAMX,KAAK,CAACY,IAAN,CAClC,wBADkC,EAElC,GAAGF,QAF+B,CAAtC;MAIAG,aAAa,CAACF,uBAAD,CAAb;IACH,CAND,CAME,OAAOG,CAAP,EAAU;MACR,MAAM;QAAEC;MAAF,IAAcD,CAAC,CAACE,QAAF,CAAWC,IAA/B;MACAT,UAAU,CAACO,OAAD,EAAU,OAAV,CAAV;MACAR,WAAW,CAAC,KAAD,CAAX;IACH;EACJ,CAbD;;EAcA,MAAMM,aAAa,GAAG,MAAOH,QAAP,IAAoB;IAEtC,IAAI;MACA,MAAMQ,gBAAgB,GAAG,MAAMlB,KAAK,CAACY,IAAN,CAC3B,wBAD2B,EAE3B,GAAGF,QAFwB,CAA/B;MAIAS,0BAA0B,CAACD,gBAAD,CAA1B;IACH,CAND,CAME,OAAOJ,CAAP,EAAU;MACR,MAAM;QAAEC;MAAF,IAAcD,CAAC,CAACE,QAAF,CAAWC,IAA/B;MACAT,UAAU,CAACO,OAAD,EAAU,OAAV,CAAV;MACAR,WAAW,CAAC,KAAD,CAAX;IACH;EACJ,CAbD;;EAeC,MAAMY,0BAA0B,GAAG,OAAOT,QAAP,EAAgBQ,gBAAhB,KAAqC;IACrEX,WAAW,CAAC,IAAD,CAAX;;IAEA,IAAI;MACA,MAAMa,kBAAkB,GAAG,MAAMpB,KAAK,CAACY,IAAN,CAC7B,wBAD6B,EAE7B;QACIS,GAAG,EAAEH,gBAAgB,CAACD,IAD1B;QAEIK,IAAI,EAAE,EAAC,GAAGZ;QAAJ;MAFV,CAF6B,CAAjC;IAOH,CARD,CAQE,OAAOI,CAAP,EAAU;MACR,MAAM;QAAEC;MAAF,IAAcD,CAAC,CAACE,QAAF,CAAWC,IAA/B;MACAT,UAAU,CAACO,OAAD,EAAU,OAAV,CAAV;MACAR,WAAW,CAAC,KAAD,CAAX;IACH,CAZD,SAYU;MACNA,WAAW,CAAC,KAAD,CAAX;IACH;EACJ,CAlBA;;EAoBD,OAAO;IAAEA,WAAF;IAAcE;EAAd,CAAP;AACH,CAvDM;;GAAMJ,O;UAGcD,O"},"metadata":{},"sourceType":"module"}