{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useContext, useEffect, useState } from 'react';\nimport { useSwal } from './useSwal';\nexport const useLead = () => {\n  _s();\n\n  const [fetching, setFetching] = useState(false);\n  const [lastStateLead, setastStateLead] = useState(false);\n  const {\n    modalAlert\n  } = useSwal();\n\n  const createLeadSales = async dataLead => {\n    setFetching(true);\n\n    try {\n      const responseCreateLeadSales = await axios.post('/api/db/stepCreateLead', { ...dataLead\n      });\n      createLeadCRM(dataLead, responseCreateLeadSales.data.id, responseCreateLeadSales.data.newOrUpdatedLead);\n    } catch (e) {\n      console.log(e);\n      const {\n        message\n      } = e.response.data;\n      modalAlert(message, \"error\");\n      setFetching(false);\n    }\n  };\n\n  const createLeadCRM = async (dataLead, leadId, newOrUpdatedLead) => {\n    console.log(dataLead); // console.log(responseCreateLeadSales);\n\n    try {\n      const resCreateLeadCRM = await axios.post('/api/createLeadZohoCRM', {\n        leadId,\n        ...dataLead\n      });\n      updateEntityIdCRMLeadSales({\n        leadId,\n        ...newOrUpdatedLead\n      }, resCreateLeadCRM);\n    } catch (e) {\n      const {\n        message\n      } = e.response.data;\n      modalAlert(message, \"error\");\n      setFetching(false);\n    }\n  };\n\n  const updateEntityIdCRMLeadSales = async (dataLead, resCreateLeadCRM) => {\n    try {\n      dataLead.entity_id_crm = resCreateLeadCRM.data.id;\n      const resEntityIdLeadCRM = await axios.post('/api/updateEntityIdLeadVentas', { ...dataLead\n      });\n    } catch (e) {\n      const {\n        message\n      } = e.response.data;\n      modalAlert(message, \"error\");\n      setFetching(false);\n    } finally {\n      setFetching(false);\n    }\n  };\n\n  return {\n    fetching,\n    createLeadSales\n  };\n};\n\n_s(useLead, \"c3ylXWt1yAhtcMW1Ae6ClnSWHA4=\", false, function () {\n  return [useSwal];\n});","map":{"version":3,"names":["axios","useContext","useEffect","useState","useSwal","useLead","fetching","setFetching","lastStateLead","setastStateLead","modalAlert","createLeadSales","dataLead","responseCreateLeadSales","post","createLeadCRM","data","id","newOrUpdatedLead","e","console","log","message","response","leadId","resCreateLeadCRM","updateEntityIdCRMLeadSales","entity_id_crm","resEntityIdLeadCRM"],"sources":["C:/xampp/htdocs/om_react/src/components/VentaPresencial/Hook/useLead.js"],"sourcesContent":["import axios from 'axios';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { useSwal } from './useSwal';\r\n\r\nexport const useLead = () => {\r\n\r\n    const [fetching, setFetching] = useState(false);\r\n    const [lastStateLead, setastStateLead] = useState(false);\r\n\r\n    const { modalAlert } = useSwal();\r\n\r\n    const createLeadSales = async (dataLead) => {\r\n        setFetching(true);\r\n        try {\r\n            const responseCreateLeadSales = await axios.post(\r\n                '/api/db/stepCreateLead',\r\n                { ...dataLead }\r\n            );\r\n            createLeadCRM(\r\n                dataLead,\r\n                responseCreateLeadSales.data.id,\r\n                responseCreateLeadSales.data.newOrUpdatedLead,\r\n            );\r\n        } catch (e) {\r\n            console.log(e);\r\n            const { message } = e.response.data;\r\n            modalAlert(message, \"error\");\r\n            setFetching(false);\r\n        } \r\n    };\r\n    const createLeadCRM = async (dataLead,leadId,newOrUpdatedLead) => {\r\n         console.log(dataLead);\r\n            // console.log(responseCreateLeadSales);\r\n        try {\r\n            const resCreateLeadCRM = await axios.post(\r\n                '/api/createLeadZohoCRM',\r\n                {leadId,...dataLead}\r\n            );\r\n            updateEntityIdCRMLeadSales({leadId,...newOrUpdatedLead},resCreateLeadCRM);\r\n        } catch (e) {\r\n            const { message } = e.response.data;\r\n            modalAlert(message, \"error\");\r\n            setFetching(false);\r\n        } \r\n    };\r\n\r\n     const updateEntityIdCRMLeadSales = async (dataLead,resCreateLeadCRM) => {\r\n         try {\r\n             dataLead.entity_id_crm = resCreateLeadCRM.data.id;\r\n            const resEntityIdLeadCRM = await axios.post(\r\n                '/api/updateEntityIdLeadVentas',\r\n                {\r\n                    ...dataLead\r\n                }\r\n            );\r\n            \r\n        } catch (e) {\r\n            const { message } = e.response.data;\r\n            modalAlert(message, \"error\");\r\n            setFetching(false);\r\n        } finally {\r\n            setFetching(false);\r\n        }\r\n    };\r\n\r\n    return { fetching,createLeadSales };\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAEzB,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BJ,QAAQ,CAAC,KAAD,CAAxC;EACA,MAAM,CAACK,aAAD,EAAgBC,eAAhB,IAAmCN,QAAQ,CAAC,KAAD,CAAjD;EAEA,MAAM;IAAEO;EAAF,IAAiBN,OAAO,EAA9B;;EAEA,MAAMO,eAAe,GAAG,MAAOC,QAAP,IAAoB;IACxCL,WAAW,CAAC,IAAD,CAAX;;IACA,IAAI;MACA,MAAMM,uBAAuB,GAAG,MAAMb,KAAK,CAACc,IAAN,CAClC,wBADkC,EAElC,EAAE,GAAGF;MAAL,CAFkC,CAAtC;MAIAG,aAAa,CACTH,QADS,EAETC,uBAAuB,CAACG,IAAxB,CAA6BC,EAFpB,EAGTJ,uBAAuB,CAACG,IAAxB,CAA6BE,gBAHpB,CAAb;IAKH,CAVD,CAUE,OAAOC,CAAP,EAAU;MACRC,OAAO,CAACC,GAAR,CAAYF,CAAZ;MACA,MAAM;QAAEG;MAAF,IAAcH,CAAC,CAACI,QAAF,CAAWP,IAA/B;MACAN,UAAU,CAACY,OAAD,EAAU,OAAV,CAAV;MACAf,WAAW,CAAC,KAAD,CAAX;IACH;EACJ,CAlBD;;EAmBA,MAAMQ,aAAa,GAAG,OAAOH,QAAP,EAAgBY,MAAhB,EAAuBN,gBAAvB,KAA4C;IAC7DE,OAAO,CAACC,GAAR,CAAYT,QAAZ,EAD6D,CAE1D;;IACJ,IAAI;MACA,MAAMa,gBAAgB,GAAG,MAAMzB,KAAK,CAACc,IAAN,CAC3B,wBAD2B,EAE3B;QAACU,MAAD;QAAQ,GAAGZ;MAAX,CAF2B,CAA/B;MAIAc,0BAA0B,CAAC;QAACF,MAAD;QAAQ,GAAGN;MAAX,CAAD,EAA8BO,gBAA9B,CAA1B;IACH,CAND,CAME,OAAON,CAAP,EAAU;MACR,MAAM;QAAEG;MAAF,IAAcH,CAAC,CAACI,QAAF,CAAWP,IAA/B;MACAN,UAAU,CAACY,OAAD,EAAU,OAAV,CAAV;MACAf,WAAW,CAAC,KAAD,CAAX;IACH;EACJ,CAdD;;EAgBC,MAAMmB,0BAA0B,GAAG,OAAOd,QAAP,EAAgBa,gBAAhB,KAAqC;IACpE,IAAI;MACAb,QAAQ,CAACe,aAAT,GAAyBF,gBAAgB,CAACT,IAAjB,CAAsBC,EAA/C;MACD,MAAMW,kBAAkB,GAAG,MAAM5B,KAAK,CAACc,IAAN,CAC7B,+BAD6B,EAE7B,EACI,GAAGF;MADP,CAF6B,CAAjC;IAOH,CATA,CASC,OAAOO,CAAP,EAAU;MACR,MAAM;QAAEG;MAAF,IAAcH,CAAC,CAACI,QAAF,CAAWP,IAA/B;MACAN,UAAU,CAACY,OAAD,EAAU,OAAV,CAAV;MACAf,WAAW,CAAC,KAAD,CAAX;IACH,CAbA,SAaS;MACNA,WAAW,CAAC,KAAD,CAAX;IACH;EACJ,CAjBA;;EAmBD,OAAO;IAAED,QAAF;IAAWK;EAAX,CAAP;AACH,CA9DM;;GAAMN,O;UAKcD,O"},"metadata":{},"sourceType":"module"}